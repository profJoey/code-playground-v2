<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta content="text/html; charset=UTF-8; X-Content-Type-Options=nosniff" http-equiv="Content-Type" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>My Portfolio</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="../global.css" />
    <script src="../global.js" defer></script>
    <!-- Use Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inclusive+Sans&family=Mooli&display=swap" rel="stylesheet">

    <style>
body {
    font-family: Arial, sans-serif;
}
main {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
}
#drag-area {
  width: 100%;
  height: 100%;
}
.draggable {
    width: 200px;
    height: 200px;
    top: 250px;
    background-color: white;
    color: #fff;
    text-align: center;
    line-height: 30px;
    cursor: pointer;
    position: absolute;
}
#draggable1 {
  left: 300px;
}
#draggable2 {
  left: 600px;
}

    </style>

  </head>
  <body>
    <header></header>
    <nav></nav>
    <main>
        <div id="drag-area">
          <div class="draggable" id="draggable1" draggable="true"></div>
          <div class="draggable" id="draggable2" draggable="true"></div>
        </div>
    </main>
    <footer></footer>
  </body>

  <script>
    // Get the elements we want to drag
    const draggables = document.querySelectorAll('.draggable');

    // To be used to store the element while being dragged
    let draggedElement = null;

    // Loop through the nodeList (array) of draggable elements
    draggables.forEach(draggable => {
      //for each element in the nodeList (array) add a 'dragstart' event listener
      draggable.addEventListener('dragstart', (e) => {
        //get the id of the dragged element to track it
        e.dataTransfer.setData('text/plain', draggable.id);
        //store the element while being dragged
        draggedElement = draggable;

        //use the method 'getBoundingClientRect()'
        //this methods gets data about an element's position and size
        const rect = draggable.getBoundingClientRect();
        // Store the initial offset from the mouse pointer to the element's top-left corner
        offsetX = e.clientX - rect.left;
        offsetY = e.clientY - rect.top;

        // Sets the position of the draggable element based on the position of the cursor subtracted by the offset
        //This math positions the element's center over the cursor position rather than the element's top/left corner
        draggable.style.left = e.clientX - offsetX + 'px';
        draggable.style.top = e.clientY - offsetY + 'px';
    });

    //listens for when the user stops dragging
    draggable.addEventListener('dragend', () => {
        //set the element back to null once it's no longer dragged
        draggedElement = null;
    });
});

// Add an event listener to the body for 'dragover'
document.body.addEventListener('dragover', (e) => {
    //The default behavior of any element doesn't allow for dragging
    //This stops this default behavior, to allow dragging during a 'dragover' event
    e.preventDefault();
});

//Add an event listener to the body for when the user lets go of the drag
document.body.addEventListener('drop', (e) => {
    //again we must stop the default behavior
    //the default behavior does not allow for drag and drop
    e.preventDefault();

    //check to make sure that the draggedElement is not still null
    //the dragged element won't be null any time it's dragged
    if (draggedElement) {
      //calculate a new position as centered over the mouse cursor when dropped
      const offsetX = draggedElement.offsetWidth / 2;
      const offsetY = draggedElement.offsetHeight / 2;
      const x = e.clientX - offsetX;
      const y = e.clientY - offsetY;
      
      //position the new element using the calculations above
      //update the elements css properties to do so
      draggedElement.style.left = x + 'px';
      draggedElement.style.top = y + 'px';

      //Once the position is calculated and set, we can append the dragged element back into the body element
      document.body.appendChild(draggedElement);
      draggedElement = null;
    }
});


  </script>
  
</html>